<!DOCTYPE html>
<html>

<head>
    <title>SunCalc Values</title>
</head>

<body>
    <h1>Akurasi Waktu Shalat</h1>
    <p>Shubuh: <span id="astronomicalDawn"></span></p>
    <p>Isya: <span id="astronomicalDusk"></span></p>
    <p>Ashar: <span id="time45"></span></p>
    <p>Akhir waktu Ashar: <span id="time26"></span></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.8.0/suncalc.min.js"></script>
    <script>
        const date = new Date();
        const lat = 24;
        const lng = 40;

        const { nightEnd: astronomicalDawn, night: astronomicalDusk, solarNoon, sunset, sunrise } = SunCalc.getTimes(date, lat, lng);
        const getAltitudeInDegrees = (time) => SunCalc.getPosition(time, lat, lng).altitude * 180 / Math.PI;

        const solarNoonAngle = getAltitudeInDegrees(solarNoon);
        const sunsetAngle = getAltitudeInDegrees(sunset);
        const timeToSunset = (sunset - solarNoon) / (sunsetAngle - solarNoonAngle);

        const getTimeWithAngle = (angle) => new Date(solarNoon.getTime() + timeToSunset * (angle - solarNoonAngle)).toLocaleTimeString();

        const nightDuration = (astronomicalDusk - astronomicalDawn) / (1000 * 60 * 60 * 24);
        const oneThirdNight = new Date(astronomicalDusk.getTime() - nightDuration / 3 * 60 * 60 * 1000).toLocaleTimeString();
        const twoThirdsNight = new Date(astronomicalDusk.getTime() - nightDuration / 3 * 2 * 60 * 60 * 1000).toLocaleTimeString();

        const setTextContent = (id, value) => document.getElementById(id).textContent = value;

        setTextContent('astronomicalDawn', astronomicalDawn.toLocaleTimeString());
        setTextContent('astronomicalDusk', astronomicalDusk.toLocaleTimeString());
        setTextContent('solarNoon', solarNoon.toLocaleTimeString());
        setTextContent('oneThirdNight', oneThirdNight);
        setTextContent('twoThirdsNight', twoThirdsNight);
        setTextContent('time45', getTimeWithAngle(45));
        setTextContent('time26', getTimeWithAngle(26.57));

    </script>
</body>

</html>